var cov_ayk3mgwtk=function(){var path="C:\\Users\\Ajcat\\Desktop\\CPEN491-Capstone\\SeaChangeBackendServer\\endpoints\\post-article.js",hash="51c29526fe00ac1a671dfbd8f3e2e9aab2c32871",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\Ajcat\\Desktop\\CPEN491-Capstone\\SeaChangeBackendServer\\endpoints\\post-article.js",statementMap:{"0":{start:{line:4,column:16},end:{line:4,column:34}},"1":{start:{line:5,column:15},end:{line:5,column:31}},"2":{start:{line:6,column:11},end:{line:6,column:38}},"3":{start:{line:7,column:13},end:{line:7,column:45}},"4":{start:{line:9,column:0},end:{line:23,column:3}},"5":{start:{line:11,column:4},end:{line:11,column:137}},"6":{start:{line:11,column:72},end:{line:11,column:137}},"7":{start:{line:13,column:4},end:{line:22,column:7}},"8":{start:{line:16,column:8},end:{line:21,column:9}},"9":{start:{line:17,column:12},end:{line:17,column:74}},"10":{start:{line:19,column:12},end:{line:19,column:29}},"11":{start:{line:20,column:12},end:{line:20,column:79}},"12":{start:{line:25,column:0},end:{line:25,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:50},end:{line:9,column:51}},loc:{start:{line:9,column:69},end:{line:23,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:8},end:{line:15,column:9}},loc:{start:{line:15,column:37},end:{line:22,column:5}},line:15}},branchMap:{"0":{loc:{start:{line:11,column:4},end:{line:11,column:137}},type:"if",locations:[{start:{line:11,column:4},end:{line:11,column:137}},{start:{line:11,column:4},end:{line:11,column:137}}],line:11},"1":{loc:{start:{line:11,column:8},end:{line:11,column:70}},type:"binary-expr",locations:[{start:{line:11,column:8},end:{line:11,column:33}},{start:{line:11,column:37},end:{line:11,column:70}}],line:11},"2":{loc:{start:{line:16,column:8},end:{line:21,column:9}},type:"if",locations:[{start:{line:16,column:8},end:{line:21,column:9}},{start:{line:16,column:8},end:{line:21,column:9}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();// POST ARTICLE API ENDPOINT ROUTES
// ===============================================
const express=(cov_ayk3mgwtk.s[0]++,require("express"));const router=(cov_ayk3mgwtk.s[1]++,express.Router());const db=(cov_ayk3mgwtk.s[2]++,require('../components/db'));const auth=(cov_ayk3mgwtk.s[3]++,require('../auth/auth-firebase'));cov_ayk3mgwtk.s[4]++;router.post('/article-upload',auth.authenticate,function(req,res){cov_ayk3mgwtk.f[0]++;cov_ayk3mgwtk.s[5]++;if((cov_ayk3mgwtk.b[1][0]++,req.body.url==undefined)||(cov_ayk3mgwtk.b[1][1]++,req.body.description==undefined)){cov_ayk3mgwtk.b[0][0]++;cov_ayk3mgwtk.s[6]++;return res.status(500).send("Request Body is not set properly");}else{cov_ayk3mgwtk.b[0][1]++;}cov_ayk3mgwtk.s[7]++;db.query(`INSERT INTO ebdb.NewsArticlePost (url, description, uploaded_at) VALUES (?, ?, ?)`,[req.body.url,req.body.description,new Date()],function(err,rows,fields){cov_ayk3mgwtk.f[1]++;cov_ayk3mgwtk.s[8]++;if(!err){cov_ayk3mgwtk.b[2][0]++;cov_ayk3mgwtk.s[9]++;return res.status(200).send('Article successfully uploaded!');}else{cov_ayk3mgwtk.b[2][1]++;cov_ayk3mgwtk.s[10]++;console.log(err);cov_ayk3mgwtk.s[11]++;res.status(500).send("There was a problem uploading the article.");}});});cov_ayk3mgwtk.s[12]++;module.exports=router;