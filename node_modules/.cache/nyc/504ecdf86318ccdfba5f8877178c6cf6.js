var cov_14a0bgluc6=function(){var path="C:\\Users\\Ajcat\\Desktop\\CPEN491-Capstone\\SeaChangeBackendServer\\auth\\auth-firebase.js",hash="fc05ab8cad21dadb26eb3ec6cfd12ab5797bdb88",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\Ajcat\\Desktop\\CPEN491-Capstone\\SeaChangeBackendServer\\auth\\auth-firebase.js",statementMap:{"0":{start:{line:3,column:14},end:{line:3,column:39}},"1":{start:{line:4,column:23},end:{line:4,column:43}},"2":{start:{line:6,column:0},end:{line:8,column:3}},"3":{start:{line:10,column:0},end:{line:23,column:1}},"4":{start:{line:12,column:4},end:{line:12,column:99}},"5":{start:{line:12,column:35},end:{line:12,column:99}},"6":{start:{line:14,column:4},end:{line:22,column:11}},"7":{start:{line:16,column:12},end:{line:16,column:38}},"8":{start:{line:17,column:22},end:{line:17,column:38}},"9":{start:{line:18,column:12},end:{line:18,column:48}},"10":{start:{line:19,column:12},end:{line:19,column:19}},"11":{start:{line:21,column:12},end:{line:21,column:66}}},fnMap:{"0":{name:"authenticate",decl:{start:{line:10,column:39},end:{line:10,column:51}},loc:{start:{line:10,column:69},end:{line:23,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:14},end:{line:15,column:15}},loc:{start:{line:15,column:37},end:{line:20,column:9}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:33},end:{line:22,column:9}},line:20}},branchMap:{"0":{loc:{start:{line:12,column:4},end:{line:12,column:99}},type:"if",locations:[{start:{line:12,column:4},end:{line:12,column:99}},{start:{line:12,column:4},end:{line:12,column:99}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();// AUTH API FIREBASE
// ===============================================
const admin=(cov_14a0bgluc6.s[0]++,require('firebase-admin'));const serviceAccount=(cov_14a0bgluc6.s[1]++,require('../config'));cov_14a0bgluc6.s[2]++;admin.initializeApp({credential:admin.credential.cert(serviceAccount.firebase_admin)});cov_14a0bgluc6.s[3]++;module.exports.authenticate=function authenticate(req,res,next){cov_14a0bgluc6.f[0]++;cov_14a0bgluc6.s[4]++;if(req.query.idToken==null){cov_14a0bgluc6.b[0][0]++;cov_14a0bgluc6.s[5]++;return res.status(500).send('Missing authentication token id.');}else{cov_14a0bgluc6.b[0][1]++;}cov_14a0bgluc6.s[6]++;admin.auth().verifyIdToken(req.query.idToken).then(function(decodedToken){cov_14a0bgluc6.f[1]++;cov_14a0bgluc6.s[7]++;console.log(decodedToken);var uid=(cov_14a0bgluc6.s[8]++,decodedToken.uid);cov_14a0bgluc6.s[9]++;console.log("Token uid is: "+uid);cov_14a0bgluc6.s[10]++;next();}).catch(function(error){cov_14a0bgluc6.f[2]++;cov_14a0bgluc6.s[11]++;res.status(500).send('Failed to authenticate token.');});};